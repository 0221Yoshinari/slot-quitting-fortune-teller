import streamlit as st
import random

# --- å®šç¾©ãƒ‡ãƒ¼ã‚¿ ---
# è³ªå•é …ç›®ã¨é¸æŠè‚¢ã€ãŠã‚ˆã³å†…éƒ¨çš„ãªã‚¹ã‚³ã‚¢ä»˜ã‘
# ã‚¹ã‚³ã‚¢ã¯ä¾‹ã§ã‚ã‚Šã€è¡¨ç¤ºãƒ‘ã‚¿ãƒ¼ãƒ³ã«å½±éŸ¿ã—ã¾ã™
QUESTIONS_DATA = [
    {
        "question": "ä»Šæ—¥ã®å°ã¨ã®ã¤ãªãŒã‚Šå…·åˆã¯ï¼Ÿ",
        "options": {"é‹å‘½å…±åŒä½“": 5, "ã‚½ã‚¦ãƒ«ãƒ¡ã‚¤ãƒˆ": 3, "å¾®å¦™ãªè·é›¢æ„Ÿ": 0, "èµ¤ã®ä»–äºº": -5},
        "key": "q1_tsunagari"
    },
    {
        "question": "ã‚ãªãŸè‡ªèº«ã®ã‚¨ã‚¹ãƒ‘ãƒ¼åº¦åˆã„ã¯ï¼Ÿ",
        "options": {"è£ãƒ¢ãƒæ„ŸçŸ¥": 5, "ã‚¾ãƒ¼ãƒ³ãŒè¦‹ãˆã‚‹": 3, "ãªã‚“ã¨ãªãåˆ†ã‹ã‚‹": 1, "å…¨ç„¶åˆ†ã‹ã‚‰ãªã„": -2},
        "key": "q2_esper"
    },
    {
        "question": "ç¾åœ¨ã®å°ã®èª¿å­ã¯ã©ã†æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
        "options": {"çµ¶å¥½èª¿ï¼GOGOãŒæ­¢ã¾ã‚‰ãªã„": 5, "ã¾ã‚ã¾ã‚ã€ã“ã‚Œã‹ã‚‰": 2, "æ³¢ãŒè’ã„": -1, "ã©ã‚“åº•ã€åœ°ç„ã®æ¥­ç«": -5},
        "key": "q3_cond"
    },
    {
        "question": "éå»ã«ã€Œã‚„ã‚ã¦å¤§å¤±æ•—ï¼ˆå¾Œä»»è€…ãŒå¤§å™´ãï¼‰ã€ã®çµŒé¨“ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€åããã†ã§ã™": -3, "ã¯ã„ã€ãŸã¾ã«": -1, "ã„ã„ãˆã€å¸¸ã«å®Œç’§": 2, "ã„ã„ãˆã€æ‰“ãŸãªã„": 0},
        "key": "q4_failure_exp"
    },
    {
        "question": "ä»Šã¾ã•ã«ã€Œã‚„ã‚æ™‚ã€ã ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€è„³ãŒãã†æŒ‡ä»¤ã™ã‚‹": -5, "ã„ã‚„ã€ã¾ã ã‚¤ã‚±ã‚‹": 2, "è¿·ã„ä¸­ã€åŠ©ã‘ã¦AIï¼": 0, "ãƒ¤ãƒ¡ã‚‹ã¨ã„ã†é¸æŠè‚¢ã¯ãªã„": 5},
        "key": "q5_feeling"
    },
    {
        "question": "è²¡å¸ƒã®ä¸­èº«ã¯æ®‹ã‚Šã„ãã‚‰ï¼Ÿ",
        "type": "number_input",
        "min_value": 0, "max_value": 500000, "step": 1000, "value": 0,
        "score_bands": {50000: 5, 10000: 2, 1: 0, 0: -5}, # 5ä¸‡å††ä»¥ä¸Šã§5ç‚¹, 1ä¸‡å††ä»¥ä¸Šã§2ç‚¹, 1å††ä»¥ä¸Šã§0ç‚¹, 0å††ã§-5ç‚¹
        "key": "q6_wallet_money"
    },
    {
        "question": "é–‰åº—ã¾ã§ã‚ã¨ä½•æ™‚é–“ï¼Ÿ",
        "type": "number_input",
        "min_value": 0, "max_value": 10, "step": 1, "value": 0,
        "score_bands": {5: 2, 3: 1, 1: 0, 0: -3}, # 5æ™‚é–“ä»¥ä¸Šã§2ç‚¹, 3æ™‚é–“ä»¥ä¸Šã§1ç‚¹, 1æ™‚é–“ä»¥ä¸Šã§0ç‚¹, 0æ™‚é–“ã§-3ç‚¹
        "key": "q7_closing_hours"
    },
    {
        "question": "éš£ã®å°ã¯å‡ºç‰çˆ†ç™ºä¸­ã§ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€çœ©ã—ã„": -2, "ã¯ã„ã€ã§ã‚‚ç§ã®æ–¹ãŒ": 1, "ã„ã„ãˆã€ãƒ‰ãƒ³ãƒã‚¤": 0, "ã„ã„ãˆã€ç§ã‚‚ç€•æ­»": -3},
        "key": "q8_neighbor"
    },
    {
        "question": "ä»Šæ—¥ã®ãƒ‘ãƒå±‹ã®ãƒˆã‚¤ãƒ¬ã¯ç¶ºéº—ã§ã—ãŸã‹ï¼Ÿ",
        "options": {"ãƒ”ã‚«ãƒ”ã‚«": 1, "æ™®é€š": 0, "ã¡ã‚‡ã£ã¨â€¦": -1, "è¡Œã£ã¦ãªã„": 0},
        "key": "q9_toilet"
    },
    {
        "question": "ä»Šæ—¥ã®é‹å‹¢ã¯ï¼Ÿï¼ˆæ¥åº—å‰ã«å ã£ãŸã¨ã—ã¦ï¼‰",
        "options": {"å¤§å‰": 3, "å‰": 2, "ä¸­å‰": 1, "å°å‰": 0, "æœ«å‰": -1, "å‡¶": -2, "å¤§å‡¶": -3},
        "key": "q10_fortune"
    },
    {
        "question": "GOGOãƒ©ãƒ³ãƒ—ã«ä½•ã‹ãŒå®¿ã£ã¦ã„ã‚‹ã®ã‚’æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
        "options": {"ç¢ºä¿¡ã—ãŸ": 4, "ä½•ã¨ãªã": 2, "æ°—ã®ã›ã„": 0, "è¦‹ãˆãªã„": -2},
        "key": "q11_gogo_aura"
    },
    {
        "question": "ä»Šæ—¥ã€åº—å“¡ã•ã‚“ãŒä½•å›ã‚ãªãŸã®å°ã«æ³¨ç›®ã—ã¾ã—ãŸã‹ï¼Ÿ",
        "type": "number_input",
        "min_value": 0, "max_value": 10, "step": 1, "value": 0,
        "score_bands": {3: 3, 1: 1, 0: 0}, # 3å›ä»¥ä¸Šã§3ç‚¹, 1å›ä»¥ä¸Šã§1ç‚¹, 0å›ã§0ç‚¹
        "key": "q12_staff_attention"
    },
    {
        "question": "ã‚ãªãŸã®å¾Œã‚ã§ã€èª°ã‹å°ã‚’å¾…ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€æ®ºæ°—ã‚’æ„Ÿã˜ã‚‹": -3, "ã¯ã„ã€ãƒãƒ©è¦‹": -1, "ã„ã„ãˆã€å¿«é©": 1, "ã„ã„ãˆã€ç§ã ã‘": 0},
        "key": "q13_waiting"
    },
    {
        "question": "ä»Šæ—¥ã®æœ€çµ‚ç›®æ¨™å‡ºç‰ã¯ä½•æšã§ã—ãŸã‹ï¼Ÿ",
        "type": "number_input",
        "min_value": 0, "max_value": 100000, "step": 100, "value": 0,
        "score_bands": {10000: 3, 5000: 2, 1000: 1, 0: -2}, # 1ä¸‡æšä»¥ä¸Šã§3ç‚¹, 5åƒæšä»¥ä¸Šã§2ç‚¹, 1åƒæšä»¥ä¸Šã§1ç‚¹, 0æšã§-2ç‚¹
        "key": "q14_target_medals"
    },
    {
        "question": "ä»Šã®å°ã€æ„›ã›ã¾ã™ã‹ï¼Ÿ",
        "options": {"æ„›ã—ã¦ã‚‹ï¼": 5, "ã¾ã‚ã¾ã‚å¥½ã": 2, "å«Œã„ã«ãªã‚Šãã†": -2, "ç„¡ç†": -5},
        "key": "q15_love_machine"
    },
    {
        "question": "ãŠæ˜¼ã”é£¯ã€ç¾å‘³ã—ã‹ã£ãŸã§ã™ã‹ï¼Ÿ",
        "options": {"æœ€é«˜ï¼": 1, "æ™®é€š": 0, "ã¾ãšã‹ã£ãŸ": -1, "é£Ÿã¹ã¦ãªã„": -1},
        "key": "q16_lunch"
    },
    {
        "question": "å®¶ã§å¾…ã¤å®¶æ—ï¼ˆãƒšãƒƒãƒˆå«ã‚€ï¼‰ã®é¡”ãŒã¡ã‚‰ã¤ãã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€å¤©ä½¿ã®ç¬‘é¡”": -4, "ã¯ã„ã€ãã‚ãã‚": -2, "ã„ã„ãˆã€ã¾ã é—˜ã†": 2, "å®¶æ—ï¼Ÿä½•ãã‚Œ": 5},
        "key": "q17_family_face"
    },
    {
        "question": "æœ€çµ‚ãƒœãƒ¼ãƒŠã‚¹ã‹ã‚‰100Gä»¥å†…ã§å½“ãŸã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€é€£è˜ä¸­": 3, "ã¯ã„ã€ã™ãã«": 2, "ã„ã„ãˆã€ãƒãƒã‚Šä¸­": -2},
        "key": "q18_within_100g"
    },
    {
        "question": "ä»Šæ—¥ã®ãƒ¬ãƒãƒ¼ã‚ªãƒ³ã€è„³æ±ãŒå‡ºã¾ã—ãŸã‹ï¼Ÿ",
        "options": {"æ¯æ—¥å‡ºã‚‹": 3, "ãŸã¾ã«": 1, "ä»Šæ—¥ã¯ã¾ã ": -1, "å‡ºãªã„": -3},
        "key": "q19_noujiru"
    },
    {
        "question": "ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã©ã“ã¾ã§å¾“ã„ã¾ã™ã‹ï¼Ÿ",
        "options": {"å…¨é¢çš„ã«ä¿¡é ¼ï¼": 2, "å‚è€ƒç¨‹åº¦": 1, "åŠä¿¡åŠç–‘": 0, "è‡ªåˆ†ã®æ„Ÿæ€§ãŒå…¨ã¦": -2},
        "key": "q20_trust_tool"
    },
]

# --- çµæœãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ30å€‹ï¼‰ ---
RESULT_MESSAGES = {
    "score_very_low": [ # è¶…ãƒ¤ãƒ¡æ™‚ï¼å±é™ºä¿¡å·ï¼ (ä¾‹: -50ç‚¹ã€œ-30ç‚¹)
        "ğŸš¨ **ç·Šæ€¥é€Ÿå ±ï¼å°ãŒã‚ãªãŸã‚’å«Œã£ã¦ã„ã¾ã™ï¼** ä»Šã™ãå¸­ã‚’ç«‹ã¡ã€ç¾å‘³ã—ã„ã”é£¯ã‚’é£Ÿã¹ã«è¡Œãã¾ã—ã‚‡ã†ã€‚å¾Œæ‚”ã™ã‚‹å‰ã«ï¼",
        "ğŸ’€ **å¼·åˆ¶çµ‚äº†æ¨å¥¨ï¼** ã“ã®ã¾ã¾ç¶šè¡Œã™ã‚‹ã¨ã€æ˜æ—¥ã®æœé£Ÿã¯ãƒ‘ãƒ³ã®è€³ã ã‘ã«ãªã‚‹æœªæ¥ãŒè¦‹ãˆã¾ã™ã€‚é€ƒã’ã¦ï¼",
        "ğŸƒâ€â™‚ï¸ **Runï¼Runï¼Runï¼** ã‚ãªãŸã®èƒŒå¾Œã«ã€ãƒ¤ãƒ¡ã®å¦–ç²¾ãŒç«‹ã£ã¦ã„ã¾ã™ã€‚ãƒ€ãƒƒã‚·ãƒ¥ã§é€ƒã’ã¾ã—ã‚‡ã†ï¼",
        "ğŸš« **å°ã‹ã‚‰ã®ãƒ¬ãƒƒãƒ‰ã‚«ãƒ¼ãƒ‰ï¼** ã‚ãªãŸã®è² ã‘ã§ã™ã€‚æ½”ãå¸­ã‚’ç«‹ã¡ã€é ãã®æ™¯è‰²ã§ã‚‚çœºã‚ã¦å¿ƒã‚’è½ã¡ç€ã‹ã›ã¾ã—ã‚‡ã†ã€‚",
        "ğŸ’¸ **è²¡å¸ƒãŒæ‚²é³´ã‚’ä¸Šã’ã¦ã„ã¾ã™ã€‚** ä»Šã™ãå¸­ã‚’ç«‹ã¡ã€éŠ€è¡Œå£åº§ã®æ®‹é«˜ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚æ‰‹é…ã‚Œã«ãªã‚‹å‰ã«ï¼",
        "ğŸŒªï¸ **ç ´æ»…ã®åµãŒæ¥ã¦ã„ã¾ã™ï¼** é€ƒã’ã¦ãã ã•ã„ã€å°ãŒã‚ãªãŸã«ç‰™ã‚’å‰¥ã„ã¦ã„ã¾ã™ï¼",
        "ğŸ‘¹ **é­”ç•Œã¸ã®æ‰‰ãŒé–‹ã„ã¦ã„ã¾ã™ï¼** ãã®æ‰‰ã®å‘ã“ã†ã¯ã€åœ°ç„ã§ã™ã€‚çµ¶å¯¾ã«å…¥ã‚‰ãªã„ã§ãã ã•ã„ã€‚",
        "ğŸ‘» **å¹½éœŠãŒã‚ãªãŸã®è‚©ã‚’å©ã„ã¦ã„ã¾ã™ã€‚** ã€ã‚‚ã†â€¦ãƒ¤ãƒ¡ãƒ­â€¦ã€ã¨å›ã„ã¦ã„ã¾ã™ã‚ˆï¼Ÿ"
    ],
    "score_low": [ # ãƒ¤ãƒ¡æ¨å¥¨ï¼å‹‡æ°—ã‚ã‚‹æ’¤é€€ï¼ (ä¾‹: -29ç‚¹ã€œ-10ç‚¹)
        "ğŸ‘‹ **ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼** ã“ã®å°ã¯ã‚‚ã†ã€ã‚ãªãŸã«å¾®ç¬‘ã¿ã‹ã‘ã‚‹ã“ã¨ã¯ãªã„ã§ã—ã‚‡ã†ã€‚æ¬¡ã®å°ã¨ã®å‡ºä¼šã„ã«æœŸå¾…ã—ã¾ã—ã‚‡ã†ã€‚",
        "ğŸš¶â€â™€ï¸ **å†·é™ãªåˆ¤æ–­ã“ãå‹åˆ©ã¸ã®é“ã€‚** ä»Šæ—¥ã®ã¨ã“ã‚ã¯ã“ã‚Œãã‚‰ã„ã§å‹˜å¼ã—ã¦ã‚„ã‚Šã¾ã—ã‚‡ã†ã€‚ãƒ‘ãƒãƒ—ãƒ­ã¯å¼•ãéš›ã‚‚è‚å¿ƒï¼",
        "ğŸµ **ä¼‘æ†©ã‚¿ã‚¤ãƒ ãªã‚‰ã¬ã€é€€æ•£ã‚¿ã‚¤ãƒ ã€‚** ä¸€åº¦ãƒ›ãƒ¼ãƒ«ã‚’å‡ºã¦ã€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã™ã‚‹ã®ã‚‚ã‚¢ãƒªã§ã™ã‚ˆã€‚ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã‚‹ã‹ã‚‚ï¼Ÿ",
        "ğŸ”„ **å¿ƒã®ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã€ãƒãƒãƒƒã¨ãªï¼** æ¬¡ã®æ©Ÿä¼šã«è³­ã‘ã¦ã€ä»Šæ—¥ã¯æ’¤é€€ã—ã¾ã—ã‚‡ã†ã€‚è‹±æ–­ã§ã™ã€‚",
        "ğŸ˜ˆ **éš£ã®å°ãŒã‚ãªãŸã‚’å˜²ç¬‘ã£ã¦ã„ã¾ã™ã€‚** ä»Šã™ããƒ¤ãƒ¡ã¦ã€å¿ƒã®å¹³ç©ã‚’å–ã‚Šæˆ»ã—ã¾ã—ã‚‡ã†ã€‚ãƒ¤ãƒ¡ã‚Œã°å‹ã¦ã‚‹æ—¥ã‚‚ã‚ã‚‹ï¼",
        "ğŸ“‰ **å°ãŒã€ã‚‚ã†ç„¡ç†â€¦ã€ã¨å›ã„ã¦ã„ã¾ã™ã€‚** ãã®å£°ã‚’ç„¡è¦–ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚ãã£ã¨ç¥ã®å£°ã§ã™ã€‚",
        "ğŸ’¤ **ä½“åŠ›ã®é™ç•Œï¼** ã‚ãªãŸã®é›†ä¸­åŠ›ã¯ã‚‚ã†é™ç•Œã§ã™ã€‚çœ æ°—ã¨æˆ¦ã†ã®ã¯ã€åˆ¥ã®æˆ¦å ´ã§ã€‚",
        "âœ‰ï¸ **è¬ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ãƒ¤ãƒ¡ã€ã€‚** ã‚ãªãŸã®ç¬¬å…­æ„ŸãŒã€ãã†å‘Šã’ã¦ã„ã‚‹æ°—ãŒã—ã¾ã›ã‚“ã‹ï¼Ÿ"
    ],
    "score_neutral": [ # è¿·ã„ä¸­â€¦ç†Ÿè€ƒã‚’ï¼ (ä¾‹: -9ç‚¹ã€œ+9ç‚¹)
        "ğŸ¤” **æ€è€ƒã¯æ·±ã„æ²¼ã€‚** ã“ã®å°ã¯ã‚ãªãŸã‚’è©¦ã—ã¦ã„ã¾ã™ã€‚ã‚‚ã†ä¸€åº¦ã€å·±ã®æ„Ÿæ€§ã¨ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¤ã‚ç›´ã—ã¾ã—ã‚‡ã†ã€‚",
        "âš–ï¸ **å¤©ç§¤ã¯æºã‚Œã¦ã„ã¾ã™ã€‚** ç¶šè¡Œã‹ãƒ¤ãƒ¡ã‹â€¦ã‚ãªãŸã®é¸ã‚“ã é“ãŒã€ä»Šæ—¥ã®é‹å‘½ã‚’æ±ºã‚ã¾ã™ã€‚å¾Œæ‚”ãªãé¸æŠã‚’ï¼",
        "ğŸ² **é‹å‘½ã®ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã£ã¦ã¿ã¾ã™ã‹ï¼Ÿ** ç¶šã‘ã‚‹ã‚‚åœ°ç„ã€ãƒ¤ãƒ¡ã‚‹ã‚‚åœ°ç„â€¦ã„ã‚„ã€ãã†ã§ã‚‚ãªã„ã‹ã‚‚ï¼Ÿ",
        "ğŸ§˜â€â™€ï¸ **ç„¡ã®å¿ƒã§ãƒ¬ãƒãƒ¼ã‚’å©ã‘ã€‚** é‚ªå¿µã‚’æ¨ã¦ã¦æ‰“ã¦ã°ã€GOGOãƒ©ãƒ³ãƒ—ãŒå…‰ã‚‹â€¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚",
        "ğŸ”® **ãŠã¿ãã˜çµæœã¯ã€Œå‰ã€ã€‚** ã©ã¡ã‚‰ã«è»¢ã¶ã‹åˆ†ã‹ã‚Šã¾ã›ã‚“ãŒã€ã‚ãªãŸã®è¡Œå‹•æ¬¡ç¬¬ã§æœªæ¥ã¯å¤‰ã‚ã‚‹ï¼ã‚³ãƒ³ãƒ“ãƒ‹ã§ç”˜ã„ã‚‚ã®ã§ã‚‚è²·ã£ã¦è€ƒãˆç›´ã›ï¼",
        "ğŸŒˆ **GOGOãƒ©ãƒ³ãƒ—ãŒã€ã¾ã è¦‹ã¬æœªæ¥ã‚’æš—ç¤ºã—ã¦ã„ã‚‹â€¦ã‹ã‚‚ï¼Ÿ** ã‚ã¨100Gã ã‘ã€è©¦ã—ã¦ã¿ã¦ã¯ï¼Ÿãã£ã¨ä½•ã‹ãŒè¦‹ãˆã‚‹ï¼",
        "ğŸ€ **é‹å‘½ã¯äº”åˆ†äº”åˆ†ã€‚** å·±ã®æ„Ÿæ€§ã‚’ä¿¡ã˜ã‚‹ã‹ã€ãã‚Œã¨ã‚‚ç¾å®Ÿã‚’è¦‹ã‚‹ã‹â€¦å…¨ã¦ã¯ã‚ãªãŸæ¬¡ç¬¬ã§ã™ã€‚",
        "â˜• **ä¸€åº¦å†·é™ã«ãªã‚Šã¾ã—ã‚‡ã†ã€‚** ãƒ›ãƒ¼ãƒ«å†…ã®ã‚«ãƒ•ã‚§ã§ä¸€æ¯å…¥ã‚Œã¦ã‹ã‚‰ã€æœ€çµ‚æ±ºæ–­ã‚’ã€‚æ„å¤–ãªé–ƒããŒã‚ã‚‹ã‹ã‚‚ï¼Ÿ"
    ],
    "score_high": [ # ç¶šè¡Œæ¨å¥¨ï¼ãƒãƒ£ãƒ³ã‚¹åˆ°æ¥ï¼ (ä¾‹: +10ç‚¹ã€œ+29ç‚¹)
        "ğŸ’ª **ã¾ã æˆ¦ãˆã‚‹ï¼** ãã®å°ã¯ã‚ãªãŸã«ã€Œã¾ã ã‚¤ã‚±ã‚‹ï¼ã€ã¨èªã‚Šã‹ã‘ã¦ã„ã¾ã™ã€‚ç²˜ã‚Šå‹ã¡ã‚’ç‹™ã„ã¾ã—ã‚‡ã†ã€‚",
        "ğŸ“ˆ **ä¸Šæ˜‡æ°—æµã«ä¹—ã‚Œï¼** ä»Šæ—¥ã®ã‚ãªãŸã¯ã€ãƒ‘ãƒã‚¹ãƒ­ã®ç¥ã«æ„›ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã®æ³¢ã‚’é€ƒã™ãªï¼",
        "ğŸ’° **è«­å‰ãŒã‚ãªãŸã‚’å‘¼ã‚“ã§ã„ã‚‹ï¼** ã“ã®ã¾ã¾ç¶šè¡Œã™ã‚Œã°ã€ãã£ã¨è²¡å¸ƒãŒãƒ‘ãƒ³ãƒ‘ãƒ³ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚å¤¢ã‚’æ´ã‚ï¼",
        "âœ¨ **GOGOãƒ©ãƒ³ãƒ—ãŒã‚ãªãŸã®å¿ƒã«è¼ãã‚’æ”¾ã¤ã€‚** å‹åˆ©ã®äºˆæ„ŸãŒã—ã¾ã™ã­ï¼ã“ã®ãƒãƒ£ãƒ³ã‚¹ã‚’é€ƒã™æ‰‹ã¯ã‚ã‚Šã¾ã›ã‚“ï¼",
        "ğŸ¦¸â€â™‚ï¸ **ã‚ãªãŸã®ã‚¨ã‚¹ãƒ‘ãƒ¼èƒ½åŠ›ãŒç›®è¦šã‚ã‚‹æ™‚ï¼** ä»Šã“ãã€ãã®è¶…èƒ½åŠ›ã‚’è§£æ”¾ã—ã¾ã—ã‚‡ã†ï¼",
        "ğŸ† **å‹åˆ©ã®å¥³ç¥ãŒå¾®ç¬‘ã‚“ã§ã„ã‚‹ï¼** ã“ã®ã¾ã¾ç¶šè¡Œã—ã¦ã€ä¼èª¬ã‚’ä½œã£ã¦ãã ã•ã„ï¼",
        "ğŸš€ **ãƒ­ã‚±ãƒƒãƒˆã‚¹ã‚¿ãƒ¼ãƒˆã®äºˆæ„Ÿï¼** ã“ã“ã‹ã‚‰ãŒæœ¬å½“ã®å‹è² ã§ã™ã€‚ç›®æŒ‡ã›ä¸‡æšï¼"
    ],
    "score_very_high": [ # è¶…ç¶šè¡Œï¼ç¥ãŒã‹ã‚Šï¼ (ä¾‹: +30ç‚¹ä»¥ä¸Š)
        "ğŸ”¥ **æ­¢ã‚æ‰“ã¡å³ç¦ï¼** ãã®å°ã¯ã‚ãªãŸã‚’è£åˆ‡ã‚‰ãªã„ã§ã—ã‚‡ã†ã€‚å‹åˆ©ã®é›„å«ã³ã‚’ä¸Šã’ã¾ã—ã‚‡ã†ï¼é–‰åº—ã¾ã§å…¨ãƒ„ãƒƒãƒ‘ï¼",
        "ğŸ‘‘ **KING OF JUGGLERï¼** ä»Šæ—¥ã®ã‚ãªãŸã¯ç„¡æ•µã§ã™ã€‚è¨­å®š6ã‚’æ´ã‚“ã ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼æœ€é«˜ã®ç¬é–“ã‚’å‘³ã‚ã„å°½ãã›ï¼",
        "ğŸ¤© **è„³æ±å¤§æ”¾å‡ºè­¦å ±ç™ºä»¤ä¸­ï¼** ãã®å°ã¯ã‚ãªãŸã®ãƒ¢ãƒã§ã™ã€‚é–‰åº—ã¾ã§å…¨ãƒ„ãƒƒãƒ‘ã—ã¾ã—ã‚‡ã†ï¼éš£ã®è¦–ç·šã‚‚æ°—ã«ã›ãšï¼",
        "ğŸ’« **ç¥ã®é ˜åŸŸã¸ã‚ˆã†ã“ãã€‚** ã‚ãªãŸã®ãƒ‘ãƒã‚¹ãƒ­äººç”Ÿã§æœ€é«˜ã®ç¬é–“ãŒè¨ªã‚Œã¦ã„ã¾ã™ã€‚ã“ã®å¥‡è·¡ã‚’æ€ã†å­˜åˆ†å‘³ã‚ã„ã¾ã—ã‚‡ã†ï¼"
    ]
}

# --- Streamlit UI éƒ¨åˆ† ---

st.set_page_config(
    page_title="ãƒ‘ãƒã‚¹ãƒ­ã‚„ã‚æ™‚ãŠã¿ãã˜ãƒ„ãƒƒãƒ‘ï¼",
    layout="centered",
    initial_sidebar_state="collapsed", # ã‚µã‚¤ãƒ‰ãƒãƒ¼ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é–‰ã˜ã‚‹
    page_icon="ğŸ”®" 
)

st.title("ğŸ° ãƒ‘ãƒã‚¹ãƒ­ã‚„ã‚æ™‚ãŠã¿ãã˜ãƒ„ãƒƒãƒ‘ï¼ ğŸ°")

st.markdown(
    """
    **ä»Šæ‰“ã£ã¦ã‚‹å°ã®ã‚„ã‚æ™‚ã‚’ä¸€ç™ºã§åˆ¤å®šï¼**
    ã‚„ã‚ã‚‹ã‹ã€ã‚„ã‚ãªã„ã‹æ‚©ã‚“ã§ã„ã‚‹ãã“ã®ã‚ãªãŸã€‚
    ã“ã®ãƒ„ãƒ¼ãƒ«ã®çµæœã‚’åˆ¤æ–­ææ–™ã«ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒï¼Ÿ
    ---
    """
)

st.header("â–¼è³ªå•ã«ç­”ãˆã¦ã€ã‚ãªãŸã®ã€ã‚„ã‚æ™‚ã€ã‚’å ãŠã†ï¼â–¼")
st.markdown("æ­£ç›´ã«ã€ç›´æ„Ÿã§ç­”ãˆã‚‹ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ï¼")

user_answers = {}
total_score = 0

with st.container(border=True):
    for i, q_data in enumerate(QUESTIONS_DATA):
        st.markdown(f"##### Q{i+1}. {q_data['question']}")
        
        if q_data.get("type") == "number_input":
            answer = st.number_input(f"{q_data['question']} (æ•°å€¤å…¥åŠ›)", 
                                     min_value=q_data.get("min_value", 0), 
                                     max_value=q_data.get("max_value", None), 
                                     value=q_data.get("value", 0), 
                                     step=q_data.get("step", 1), 
                                     key=q_data['key'])
            
            # ã‚¹ã‚³ã‚¢ãƒãƒ³ãƒ‰ã«åŸºã¥ã„ã¦ã‚¹ã‚³ã‚¢ã‚’æ±ºå®š
            score = 0
            sorted_bands = sorted(q_data['score_bands'].items(), reverse=True) # é–¾å€¤ãŒé«˜ã„é †
            for threshold, band_score in sorted_bands:
                if answer >= threshold:
                    score = band_score
                    break
            
        else: # selectbox (default)
            options_list = list(q_data['options'].keys())
            answer = st.selectbox("é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„", options_list, key=q_data['key'])
            score = q_data['options'].get(answer, 0) # é¸æŠè‚¢ã«å¯¾å¿œã™ã‚‹ã‚¹ã‚³ã‚¢ã‚’å–å¾—
        
        user_answers[q_data['key']] = answer
        total_score += score
        
        st.markdown("---") # å„è³ªå•ã®åŒºåˆ‡ã‚Šç·š

st.markdown("### ã•ã‚ã€ã‚ãªãŸã®ã‚„ã‚æ™‚ã¯ï¼ï¼Ÿ")
predict_button = st.button("ğŸ”® ã‚„ã‚æ™‚ã‚’å ã†ï¼", type="primary")

if predict_button:
    # ã‚¹ã‚³ã‚¢ã«åŸºã¥ã„ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é¸æŠ
    # è³ªå•ã‚¹ã‚³ã‚¢ã®åˆè¨ˆç¯„å›²ã‚’è€ƒæ…®ã—ã¦èª¿æ•´
    # æœ€å°ã‚¹ã‚³ã‚¢: -5*13 = -65 (é¸æŠè‚¢ç³») + (æ•°å€¤ç³»æœ€ä½) -5*3 = -15. ãã‚‰ã„
    # æœ€å¤§ã‚¹ã‚³ã‚¢: 5*13 = 65 + (æ•°å€¤ç³»æœ€é«˜) 5*3 = 15. ãã‚‰ã„
    # ç·è³ªå•æ•°20å€‹ã§ã€é¸æŠè‚¢ãŒ13å€‹ã€æ•°å€¤ãŒ7å€‹(ã‚¹ã‚³ã‚¢ãƒãƒ³ãƒ‰ãŒ4ã¤ã‚ã‚‹ã‚‚ã®ã‚‚ã‚ã‚‹ã®ã§èª¿æ•´)
    # å¤§ä½“ -50 ~ +50 ãã‚‰ã„ã®ç¯„å›²ã¨ä»®å®š

    if total_score >= 30: # éå¸¸ã«é«˜ã„ã‚¹ã‚³ã‚¢
        result_category = "score_very_high"
    elif total_score >= 10: # é«˜ã„ã‚¹ã‚³ã‚¢
        result_category = "score_high"
    elif total_score >= -10: # ä¸­é–“ï¼ˆãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ï¼‰ã‚¹ã‚³ã‚¢
        result_category = "score_neutral"
    elif total_score >= -30: # ä½ã„ã‚¹ã‚³ã‚¢
        result_category = "score_low"
    else: # éå¸¸ã«ä½ã„ã‚¹ã‚³ã‚¢
        result_category = "score_very_low"
    
    selected_message = random.choice(RESULT_MESSAGES[result_category])
    
    st.subheader("â–¼ãŠã¿ãã˜çµæœâ–¼")
    st.markdown(f"## {selected_message}")
    st.markdown(f"ï¼ˆåˆè¨ˆã‚¹ã‚³ã‚¢: {total_score}ç‚¹ï¼‰")
    st.info("â€»ã“ã®çµæœã¯ã‚ãã¾ã§ãŠãµã–ã‘ã§ã™ã€‚éŠæŠ€ã¯è‡ªå·±è²¬ä»»ã§ãŠé¡˜ã„ã—ã¾ã™ï¼")