import streamlit as st
import random

# --- å®šç¾©ãƒ‡ãƒ¼ã‚¿ ---
# è³ªå•é …ç›®ã¨é¸æŠè‚¢ã€ãŠã‚ˆã³å†…éƒ¨çš„ãªã‚¹ã‚³ã‚¢ä»˜ã‘
# ã‚¹ã‚³ã‚¢ã¯ä¾‹ã§ã‚ã‚Šã€è¡¨ç¤ºãƒ‘ã‚¿ãƒ¼ãƒ³ã«å½±éŸ¿ã—ã¾ã™
QUESTIONS_DATA = [
    {
        "question": "ä»Šæ—¥ã®å°ã¨ã®ã¤ãªãŒã‚Šå…·åˆã¯ï¼Ÿ",
        "options": {"é‹å‘½å…±åŒä½“": 5, "ã‚½ã‚¦ãƒ«ãƒ¡ã‚¤ãƒˆ": 3, "å¾®å¦™ãªè·é›¢æ„Ÿ": 0, "èµ¤ã®ä»–äºº": -5},
        "key": "q1_tsunagari"
    },
    {
        "question": "ã‚ãªãŸè‡ªèº«ã®ã‚¨ã‚¹ãƒ‘ãƒ¼åº¦åˆã„ã¯ï¼Ÿ",
        "options": {"è£ãƒ¢ãƒæ„ŸçŸ¥": 5, "ã‚¾ãƒ¼ãƒ³ãŒè¦‹ãˆã‚‹": 3, "ãªã‚“ã¨ãªãåˆ†ã‹ã‚‹": 1, "å…¨ç„¶åˆ†ã‹ã‚‰ãªã„": -2},
        "key": "q2_esper"
    },
    {
        "question": "ç¾åœ¨ã®å°ã®èª¿å­ã¯ã©ã†æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
        "options": {"çµ¶å¥½èª¿ï¼GOGOãŒæ­¢ã¾ã‚‰ãªã„": 5, "ã¾ã‚ã¾ã‚ã€ã“ã‚Œã‹ã‚‰": 2, "æ³¢ãŒè’ã„": -1, "ã©ã‚“åº•ã€åœ°ç„ã®æ¥­ç«": -5},
        "key": "q3_cond"
    },
    {
        "question": "éå»ã«ã€Œã‚„ã‚ã¦å¤§å¤±æ•—ï¼ˆå¾Œä»»è€…ãŒå¤§å™´ãï¼‰ã€ã®çµŒé¨“ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€åããã†ã§ã™": -3, "ã¯ã„ã€ãŸã¾ã«": -1, "ã„ã„ãˆã€å¸¸ã«å®Œç’§": 2, "ã„ã„ãˆã€æ‰“ãŸãªã„": 0},
        "key": "q4_failure_exp"
    },
    {
        "question": "ä»Šã¾ã•ã«ã€Œã‚„ã‚æ™‚ã€ã ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€è„³ãŒãã†æŒ‡ä»¤ã™ã‚‹": -5, "ã„ã‚„ã€ã¾ã ã‚¤ã‚±ã‚‹": 2, "è¿·ã„ä¸­ã€åŠ©ã‘ã¦AIï¼": 0, "ãƒ¤ãƒ¡ã‚‹ã¨ã„ã†é¸æŠè‚¢ã¯ãªã„": 5},
        "key": "q5_feeling"
    },
    {
        "question": "éš£ã®å°ã¯å‡ºç‰çˆ†ç™ºä¸­ã§ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€çœ©ã—ã„": -2, "ã¯ã„ã€ã§ã‚‚ç§ã®æ–¹ãŒ": 1, "ã„ã„ãˆã€ãƒ‰ãƒ³ãƒã‚¤": 0, "ã„ã„ãˆã€ç§ã‚‚ç€•æ­»": -3},
        "key": "q6_neighbor"
    },
    {
        "question": "ä»Šæ—¥ã®ãƒ‘ãƒå±‹ã®ãƒˆã‚¤ãƒ¬ã¯ç¶ºéº—ã§ã—ãŸã‹ï¼Ÿ",
        "options": {"ãƒ”ã‚«ãƒ”ã‚«": 1, "æ™®é€š": 0, "ã¡ã‚‡ã£ã¨â€¦": -1, "è¡Œã£ã¦ãªã„": 0},
        "key": "q7_toilet"
    },
    {
        "question": "ä»Šæ—¥ã®é‹å‹¢ã¯ï¼Ÿï¼ˆæ¥åº—å‰ã«å ã£ãŸã¨ã—ã¦ï¼‰",
        "options": {"å¤§å‰": 3, "å‰": 2, "ä¸­å‰": 1, "å°å‰": 0, "æœ«å‰": -1, "å‡¶": -2, "å¤§å‡¶": -3},
        "key": "q8_fortune"
    },
    {
        "question": "GOGOãƒ©ãƒ³ãƒ—ã«ä½•ã‹ãŒå®¿ã£ã¦ã„ã‚‹ã®ã‚’æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
        "options": {"ç¢ºä¿¡ã—ãŸ": 4, "ä½•ã¨ãªã": 2, "æ°—ã®ã›ã„": 0, "è¦‹ãˆãªã„": -2},
        "key": "q9_gogo_aura"
    },
    {
        "question": "ä»Šæ—¥ã€åº—å“¡ã•ã‚“ãŒä½•å›ã‚ãªãŸã®å°ã«æ³¨ç›®ã—ã¾ã—ãŸã‹ï¼Ÿ",
        "options": {"3å›ä»¥ä¸Š": 3, "1,2å›": 1, "0å›": 0, "ç§ã‚’é¿ã‘ã¦ã„ã‚‹": -2},
        "type": "radio_custom_value_map", # æ•°å€¤å…¥åŠ›ã‹ã‚‰ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã«å¤‰æ›´ã™ã‚‹ãŒã€ã‚¹ã‚³ã‚¢ã¯å¤‰ã‚ã‚‰ãªã„
        "key": "q10_staff_attention"
    },
    {
        "question": "ã‚ãªãŸã®å¾Œã‚ã§ã€èª°ã‹å°ã‚’å¾…ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€æ®ºæ°—ã‚’æ„Ÿã˜ã‚‹": -3, "ã¯ã„ã€ãƒãƒ©è¦‹": -1, "ã„ã„ãˆã€å¿«é©": 1, "ã„ã„ãˆã€ç§ã ã‘": 0},
        "key": "q11_waiting"
    },
    {
        "question": "ä»Šæ—¥ã®æœ€çµ‚ç›®æ¨™å‡ºç‰ã¯ä½•æšã§ã—ãŸã‹ï¼Ÿ",
        "options": {"ç›®æ¨™é”æˆæ¸ˆã¿": 3, "ã‚‚ã†å°‘ã—": 1, "çµ¶æœ›çš„": -2, "ç›®æ¨™è¨­å®šãªã—": 0}, # æ•°å€¤å…¥åŠ›ã‹ã‚‰é¸æŠè‚¢ã«å¤‰æ›´
        "key": "q12_target_achieved"
    },
    {
        "question": "ä»Šã®å°ã€æ„›ã›ã¾ã™ã‹ï¼Ÿ",
        "options": {"æ„›ã—ã¦ã‚‹ï¼": 5, "ã¾ã‚ã¾ã‚å¥½ã": 2, "å«Œã„ã«ãªã‚Šãã†": -2, "ç„¡ç†": -5},
        "key": "q13_love_machine"
    },
    {
        "question": "ãŠæ˜¼ã”é£¯ã€ç¾å‘³ã—ã‹ã£ãŸã§ã™ã‹ï¼Ÿ",
        "options": {"æœ€é«˜ï¼": 1, "æ™®é€š": 0, "ã¾ãšã‹ã£ãŸ": -1, "é£Ÿã¹ã¦ãªã„": -1},
        "key": "q14_lunch"
    },
    {
        "question": "å®¶ã§å¾…ã¤å®¶æ—ï¼ˆãƒšãƒƒãƒˆå«ã‚€ï¼‰ã®é¡”ãŒã¡ã‚‰ã¤ãã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€å¤©ä½¿ã®ç¬‘é¡”": -4, "ã¯ã„ã€ãã‚ãã‚": -2, "ã„ã„ãˆã€ã¾ã é—˜ã†": 2, "å®¶æ—ï¼Ÿä½•ãã‚Œ": 5},
        "key": "q15_family_face"
    },
    {
        "question": "æœ€çµ‚ãƒœãƒ¼ãƒŠã‚¹ã‹ã‚‰100Gä»¥å†…ã§å½“ãŸã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€é€£è˜ä¸­": 3, "ã¯ã„ã€ã™ãã«": 2, "ã„ã„ãˆã€ãƒãƒã‚Šä¸­": -2},
        "key": "q16_within_100g"
    },
    {
        "question": "ä»Šæ—¥ã®ãƒ¬ãƒãƒ¼ã‚ªãƒ³ã€è„³æ±ãŒå‡ºã¾ã—ãŸã‹ï¼Ÿ",
        "options": {"æ¯æ—¥å‡ºã‚‹": 3, "ãŸã¾ã«": 1, "ä»Šæ—¥ã¯ã¾ã ": -1, "å‡ºãªã„": -3},
        "key": "q17_noujiru"
    },
    {
        "question": "ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã©ã“ã¾ã§å¾“ã„ã¾ã™ã‹ï¼Ÿ",
        "options": {"å…¨é¢çš„ã«ä¿¡é ¼ï¼": 2, "å‚è€ƒç¨‹åº¦": 1, "åŠä¿¡åŠç–‘": 0, "è‡ªåˆ†ã®æ„Ÿæ€§ãŒå…¨ã¦": -2},
        "key": "q18_trust_tool"
    },
    {
        "question": "ç¾åœ¨ã€ã‚ãªãŸã®èƒŒå¾Œã§ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼ã®BGMãŒèã“ãˆã¾ã™ã‹ï¼Ÿ",
        "options": {"ã¯ã„ã€ãƒ•ã‚¡ãƒ³ã‚­ãƒ¼ï¼": 2, "ã¯ã„ã€ã‚¯ãƒ©ã‚·ãƒƒã‚¯ï¼": 1, "ã„ã„ãˆã€åˆ¥ã®å°": 0, "ç„¡éŸ³": -1},
        "key": "q19_bgm"
    },
    {
        "question": "ä»Šæ—¥ã®ã‚ãªãŸã®ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼ã¯ä½•è‰²ã§ã—ãŸã‹ï¼Ÿ",
        "options": {"GOGOã‚°ãƒªãƒ¼ãƒ³": 3, "ãƒœãƒ¼ãƒŠã‚¹ãƒ”ãƒ³ã‚¯": 2, "ãƒã‚§ãƒªãƒ¼ãƒ¬ãƒƒãƒ‰": 1, "è¨­å®š1ãƒ–ãƒ©ãƒƒã‚¯": -2},
        "key": "q20_lucky_color"
    },
]

# --- çµæœãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ30å€‹ï¼‰ ---
# ã‚¹ã‚³ã‚¢å¸¯ã«å¿œã˜ã¦è¡¨ç¤ºã•ã‚Œã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤‰ãˆã‚‹
# ã‚¹ã‚³ã‚¢ç¯„å›²ã¯ä»®ã§èª¿æ•´ã€‚è³ªå•ã®æ•°ã‚„ã‚¹ã‚³ã‚¢ä»˜ã‘ã§å¤‰ã‚ã‚‹ã€‚
# å„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã€Œãƒ¦ãƒ¼ãƒ¢ãƒ©ã‚¹ã€ãªè¦ç´ ã‚’åŠ ãˆã‚‹ã€‚
RESULT_MESSAGES = {
    "score_very_low": [ # è¶…ãƒ¤ãƒ¡æ™‚ï¼å±é™ºä¿¡å·ï¼
        "ğŸš¨ **ç·Šæ€¥é€Ÿå ±ï¼å°ãŒã‚ãªãŸã‚’å«Œã£ã¦ã„ã¾ã™ï¼** ä»Šã™ãå¸­ã‚’ç«‹ã¡ã€ç¾å‘³ã—ã„ã”é£¯ã‚’é£Ÿã¹ã«è¡Œãã¾ã—ã‚‡ã†ã€‚å¾Œæ‚”ã™ã‚‹å‰ã«ï¼",
        "ğŸ’€ **å¼·åˆ¶çµ‚äº†æ¨å¥¨ï¼** ã“ã®ã¾ã¾ç¶šè¡Œã™ã‚‹ã¨ã€æ˜æ—¥ã®æœé£Ÿã¯ãƒ‘ãƒ³ã®è€³ã ã‘ã«ãªã‚‹æœªæ¥ãŒè¦‹ãˆã¾ã™ã€‚é€ƒã’ã¦ï¼",
        "ğŸƒâ€â™‚ï¸ **é«˜é€Ÿé€€é¿ï¼GOGOï¼ãƒ€ãƒƒã‚·ãƒ¥ï¼** ã‚ãªãŸã®èƒŒå¾Œã«ã€ã‚„ã‚æ™‚ã®å¦–ç²¾ãŒç«‹ã£ã¦ã„ã¾ã™ã€‚ãƒ€ãƒƒã‚·ãƒ¥ã§é€ƒã’ã¾ã—ã‚‡ã†ï¼",
        "ğŸš« **å°ã‹ã‚‰ã®ãƒ¬ãƒƒãƒ‰ã‚«ãƒ¼ãƒ‰ï¼** ã‚ãªãŸã®è² ã‘ã§ã™ã€‚æ½”ãå¸­ã‚’ç«‹ã¡ã€é ãã®æ™¯è‰²ã§ã‚‚çœºã‚ã¦å¿ƒã‚’è½ã¡ç€ã‹ã›ã¾ã—ã‚‡ã†ã€‚",
        "ğŸ’¸ **è²¡å¸ƒãŒæ‚²é³´ã‚’ä¸Šã’ã¦ã„ã¾ã™ã€‚** ä»Šã™ãå¸­ã‚’ç«‹ã¡ã€éŠ€è¡Œå£åº§ã®æ®‹é«˜ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚æ‰‹é…ã‚Œã«ãªã‚‹å‰ã«ï¼",
        "ğŸŒªï¸ **ç ´æ»…ã®åµãŒæ¥ã¦ã„ã¾ã™ï¼** é€ƒã’ã¦ãã ã•ã„ã€å°ãŒã‚ãªãŸã«ç‰™ã‚’å‰¥ã„ã¦ã„ã¾ã™ï¼",
        "ğŸ‘¹ **é­”ç•Œã¸ã®æ‰‰ãŒé–‹ã„ã¦ã„ã¾ã™ï¼** ãã®æ‰‰ã®å‘ã“ã†ã¯ã€åœ°ç„ã§ã™ã€‚çµ¶å¯¾ã«å…¥ã‚‰ãªã„ã§ãã ã•ã„ã€‚",
        "ğŸ‘» **å¹½éœŠãŒã‚ãªãŸã®è‚©ã‚’å©ã„ã¦ã„ã¾ã™ã€‚** ã€ã‚‚ã†â€¦ãƒ¤ãƒ¡ãƒ­â€¦ã€ã¨å›ã„ã¦ã„ã¾ã™ã‚ˆï¼Ÿ"
    ],
    "score_low": [ # ãƒ¤ãƒ¡æ¨å¥¨ï¼å‹‡æ°—ã‚ã‚‹æ’¤é€€ï¼
        "ğŸ‘‹ **ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼** ã“ã®å°ã¯ã‚‚ã†ã€ã‚ãªãŸã«å¾®ç¬‘ã¿ã‹ã‘ã‚‹ã“ã¨ã¯ãªã„ã§ã—ã‚‡ã†ã€‚æ¬¡ã®å°ã¨ã®å‡ºä¼šã„ã«æœŸå¾…ã—ã¾ã—ã‚‡ã†ã€‚",
        "ğŸš¶â€â™€ï¸ **å†·é™ãªåˆ¤æ–­ã“ãå‹åˆ©ã¸ã®é“ã€‚** ä»Šæ—¥ã®ã¨ã“ã‚ã¯ã“ã‚Œãã‚‰ã„ã§å‹˜å¼ã—ã¦ã‚„ã‚Šã¾ã—ã‚‡ã†ã€‚ãƒ‘ãƒãƒ—ãƒ­ã¯å¼•ãéš›ã‚‚è‚å¿ƒï¼",
        "ğŸµ **ä¼‘æ†©ã‚¿ã‚¤ãƒ ãªã‚‰ã¬ã€é€€æ•£ã‚¿ã‚¤ãƒ ã€‚** ä¸€åº¦ãƒ›ãƒ¼ãƒ«ã‚’å‡ºã¦ã€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã™ã‚‹ã®ã‚‚ã‚¢ãƒªã§ã™ã‚ˆã€‚ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã‚‹ã‹ã‚‚ï¼Ÿ",
        "ğŸ”„ **å¿ƒã®ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã€ãƒãƒãƒƒã¨ãªï¼** æ¬¡ã®æ©Ÿä¼šã«è³­ã‘ã¦ã€ä»Šæ—¥ã¯æ’¤é€€ã—ã¾ã—ã‚‡ã†ã€‚è‹±æ–­ã§ã™ã€‚",
        "ğŸ˜ˆ **éš£ã®å°ãŒã‚ãªãŸã‚’å˜²ç¬‘ã£ã¦ã„ã¾ã™ã€‚** ä»Šã™ããƒ¤ãƒ¡ã¦ã€å¿ƒã®å¹³ç©ã‚’å–ã‚Šæˆ»ã—ã¾ã—ã‚‡ã†ã€‚ãƒ¤ãƒ¡ã‚Œã°å‹ã¦ã‚‹æ—¥ã‚‚ã‚ã‚‹ï¼",
        "ğŸ“‰ **å°ãŒã€ã‚‚ã†ç„¡ç†â€¦ã€ã¨å›ã„ã¦ã„ã¾ã™ã€‚** ãã®å£°ã‚’ç„¡è¦–ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚ãã£ã¨ç¥ã®å£°ã§ã™ã€‚",
        "ğŸ’¤ **ä½“åŠ›ã®é™ç•Œï¼** ã‚ãªãŸã®é›†ä¸­åŠ›ã¯ã‚‚ã†é™ç•Œã§ã™ã€‚çœ æ°—ã¨æˆ¦ã†ã®ã¯ã€åˆ¥ã®æˆ¦å ´ã§ã€‚",
        "âœ‰ï¸ **è¬ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ãƒ¤ãƒ¡ã€ã€‚** ã‚ãªãŸã®ç¬¬å…­æ„ŸãŒã€ãã†å‘Šã’ã¦ã„ã‚‹æ°—ãŒã—ã¾ã›ã‚“ã‹ï¼Ÿ"
    ],
    "score_neutral": [ # è¿·ã„ä¸­â€¦ç†Ÿè€ƒã‚’ï¼
        "ğŸ¤” **æ€è€ƒã¯æ·±ã„æ²¼ã€‚** ã“ã®å°ã¯ã‚ãªãŸã‚’è©¦ã—ã¦ã„ã¾ã™ã€‚ã‚‚ã†ä¸€åº¦ã€å·±ã®æ„Ÿæ€§ã¨ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¤ã‚ç›´ã—ã¾ã—ã‚‡ã†ã€‚",
        "âš–ï¸ **å¤©ç§¤ã¯æºã‚Œã¦ã„ã¾ã™ã€‚** ç¶šè¡Œã‹ãƒ¤ãƒ¡ã‹â€¦ã‚ãªãŸã®é¸ã‚“ã é“ãŒã€ä»Šæ—¥ã®é‹å‘½ã‚’æ±ºã‚ã¾ã™ã€‚å¾Œæ‚”ãªãé¸æŠã‚’ï¼",
        "ğŸ² **é‹å‘½ã®ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã£ã¦ã¿ã¾ã™ã‹ï¼Ÿ** ç¶šã‘ã‚‹ã‚‚åœ°ç„ã€ãƒ¤ãƒ¡ã‚‹ã‚‚åœ°ç„â€¦ã„ã‚„ã€ãã†ã§ã‚‚ãªã„ã‹ã‚‚ï¼Ÿ",
        "ğŸ§˜â€â™€ï¸ **ç„¡ã®å¿ƒã§ãƒ¬ãƒãƒ¼ã‚’å©ã‘ã€‚** é‚ªå¿µã‚’æ¨ã¦ã¦æ‰“ã¦ã°ã€GOGOãƒ©ãƒ³ãƒ—ãŒå…‰ã‚‹â€¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚",
        "ğŸ”® **ãŠã¿ãã˜çµæœã¯ã€Œå‰ã€ã€‚** ã©ã¡ã‚‰ã«è»¢ã¶ã‹åˆ†ã‹ã‚Šã¾ã›ã‚“ãŒã€ã‚ãªãŸã®è¡Œå‹•æ¬¡ç¬¬ã§æœªæ¥ã¯å¤‰ã‚ã‚‹ï¼ã‚³ãƒ³ãƒ“ãƒ‹ã§ç”˜ã„ã‚‚ã®ã§ã‚‚è²·ã£ã¦è€ƒãˆç›´ã›ï¼",
        "ğŸŒˆ **GOGOãƒ©ãƒ³ãƒ—ãŒã€ã¾ã è¦‹ã¬æœªæ¥ã‚’æš—ç¤ºã—ã¦ã„ã‚‹â€¦ã‹ã‚‚ï¼Ÿ** ã‚ã¨100Gã ã‘ã€è©¦ã—ã¦ã¿ã¦ã¯ï¼Ÿãã£ã¨ä½•ã‹ãŒè¦‹ãˆã‚‹ï¼",
        "ğŸ€ **é‹å‘½ã¯äº”åˆ†äº”åˆ†ã€‚** å·±ã®æ„Ÿæ€§ã‚’ä¿¡ã˜ã‚‹ã‹ã€ãã‚Œã¨ã‚‚ç¾å®Ÿã‚’è¦‹ã‚‹ã‹â€¦å…¨ã¦ã¯ã‚ãªãŸæ¬¡ç¬¬ã§ã™ã€‚",
        "â˜• **ä¸€åº¦å†·é™ã«ãªã‚Šã¾ã—ã‚‡ã†ã€‚** ãƒ›ãƒ¼ãƒ«å†…ã®ã‚«ãƒ•ã‚§ã§ä¸€æ¯å…¥ã‚Œã¦ã‹ã‚‰ã€æœ€çµ‚æ±ºæ–­ã‚’ã€‚æ„å¤–ãªé–ƒããŒã‚ã‚‹ã‹ã‚‚ï¼Ÿ"
    ],
    "score_high": [ # ç¶šè¡Œæ¨å¥¨ï¼ãƒãƒ£ãƒ³ã‚¹åˆ°æ¥ï¼
        "ğŸ’ª **ã¾ã æˆ¦ãˆã‚‹ï¼** ãã®å°ã¯ã‚ãªãŸã«ã€Œã¾ã ã‚¤ã‚±ã‚‹ï¼ã€ã¨èªã‚Šã‹ã‘ã¦ã„ã¾ã™ã€‚ç²˜ã‚Šå‹ã¡ã‚’ç‹™ã„ã¾ã—ã‚‡ã†ã€‚",
        "ğŸ“ˆ **ä¸Šæ˜‡æ°—æµã«ä¹—ã‚Œï¼** ä»Šæ—¥ã®ã‚ãªãŸã¯ã€ãƒ‘ãƒã‚¹ãƒ­ã®ç¥ã«æ„›ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã®æ³¢ã‚’é€ƒã™ãªï¼",
        "ğŸ’° **è«­å‰ãŒã‚ãªãŸã‚’å‘¼ã‚“ã§ã„ã‚‹ï¼** ã“ã®ã¾ã¾ç¶šè¡Œã™ã‚Œã°ã€ãã£ã¨è²¡å¸ƒãŒãƒ‘ãƒ³ãƒ‘ãƒ³ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚å¤¢ã‚’æ´ã‚ï¼",
        "âœ¨ **GOGOãƒ©ãƒ³ãƒ—ãŒã‚ãªãŸã®å¿ƒã«è¼ãã‚’æ”¾ã¤ã€‚** å‹åˆ©ã®äºˆæ„ŸãŒã—ã¾ã™ã­ï¼ã“ã®ãƒãƒ£ãƒ³ã‚¹ã‚’é€ƒã™æ‰‹ã¯ã‚ã‚Šã¾ã›ã‚“ï¼",
        "ğŸ¦¸â€â™‚ï¸ **ã‚ãªãŸã®ã‚¨ã‚¹ãƒ‘ãƒ¼èƒ½åŠ›ãŒç›®è¦šã‚ã‚‹æ™‚ï¼** ä»Šã“ãã€ãã®è¶…èƒ½åŠ›ã‚’è§£æ”¾ã—ã€è¨­å®š6ã‚’æ´ã¿å–ã‚Šã¾ã—ã‚‡ã†ï¼",
        "ğŸ† **å‹åˆ©ã®å¥³ç¥ãŒã‚ãªãŸã«å¾®ç¬‘ã‚“ã§ã„ã‚‹ï¼** ã“ã®ã¾ã¾ç¶šè¡Œã—ã¦ã€ä¼èª¬ã‚’ä½œã£ã¦ãã ã•ã„ï¼",
        "ğŸš€ **ãƒ­ã‚±ãƒƒãƒˆã‚¹ã‚¿ãƒ¼ãƒˆã®äºˆæ„Ÿï¼** ã“ã“ã‹ã‚‰ãŒæœ¬å½“ã®å‹è² ã§ã™ã€‚ç›®æŒ‡ã›ä¸‡æšï¼"
    ],
    "score_very_high": [ # è¶…ç¶šè¡Œï¼ç¥ãŒã‹ã‚Šï¼
        "ğŸ”¥ **æ­¢ã‚æ‰“ã¡å³ç¦ï¼** ãã®å°ã¯ã‚ãªãŸã‚’è£åˆ‡ã‚‰ãªã„ã§ã—ã‚‡ã†ã€‚å‹åˆ©ã®é›„å«ã³ã‚’ä¸Šã’ã¾ã—ã‚‡ã†ï¼é–‰åº—ã¾ã§å…¨ãƒ„ãƒƒãƒ‘ï¼",
        "ğŸ‘‘ **KING OF JUGGLERï¼** ä»Šæ—¥ã®ã‚ãªãŸã¯ç„¡æ•µã§ã™ã€‚è¨­å®š6ã‚’æ´ã‚“ã ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼æœ€é«˜ã®ç¬é–“ã‚’å‘³ã‚ã„å°½ãã›ï¼",
        "ğŸ¤© **è„³æ±å¤§æ”¾å‡ºè­¦å ±ç™ºä»¤ä¸­ï¼** ãã®å°ã¯ã‚ãªãŸã®ãƒ¢ãƒã§ã™ã€‚é–‰åº—ã¾ã§å…¨ãƒ„ãƒƒãƒ‘ã—ã¾ã—ã‚‡ã†ï¼éš£ã®è¦–ç·šã‚‚æ°—ã«ã›ãšï¼",
        "ğŸ’« **ç¥ã®é ˜åŸŸã¸ã‚ˆã†ã“ãã€‚** ã‚ãªãŸã®ãƒ‘ãƒã‚¹ãƒ­äººç”Ÿã§æœ€é«˜ã®ç¬é–“ãŒè¨ªã‚Œã¦ã„ã¾ã™ã€‚ã“ã®å¥‡è·¡ã‚’æ€ã†å­˜åˆ†å‘³ã‚ã„ã¾ã—ã‚‡ã†ï¼"
    ]
}

# --- Streamlit UI éƒ¨åˆ† ---

st.set_page_config(
    page_title="ã‚„ã‚æ™‚ãŠã¿ãã˜ãƒ„ãƒƒãƒ‘ï¼",
    layout="centered",
    initial_sidebar_state="collapsed",
    page_icon="ğŸ”®"
)

st.title("ğŸ° ãƒ‘ãƒã‚¹ãƒ­ã‚„ã‚æ™‚ãŠã¿ãã˜ãƒ„ãƒƒãƒ‘ï¼ ğŸ°")
st.markdown("### ã‚ãªãŸã®ç¬¬å…­æ„Ÿã¨ã€ä»Šæ—¥ã®é‹å‘½ã‚’å ã„ã¾ã™ï¼")

st.markdown(
    """
    ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€ã‚ãªãŸã®ã€ç¬¬å…­æ„Ÿã€ã¨ã€å°ã¨ã®çµ†ã€ã‚’è©¦ã™ã€å…¨ãæ–°ã—ã„ã‚„ã‚æ™‚ãŠã¿ãã˜ãƒ„ãƒ¼ãƒ«ã§ã™ï¼
    æ•°å€¤ã‚„è§£æã¯ä¸€åˆ‡é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚ãªãŸã®ç›´æ„Ÿã¨ã€ã‚¯ã‚¹ãƒƒã¨ç¬‘ãˆã‚‹è³ªå•ã«ç­”ãˆã¦ã€ä»Šæ—¥ã®é‹å‹¢ã‚’å ã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼
    ---
    """
)

st.header("â–¼è³ªå•ã«ç­”ãˆã¦ã€ã‚ãªãŸã®ã€ã‚„ã‚æ™‚ã€ã‚’å ãŠã†ï¼â–¼")
st.markdown("æ­£ç›´ã«ã€ç›´æ„Ÿã§ç­”ãˆã‚‹ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ï¼")

user_answers = {}
total_score = 0

with st.container(border=True):
    for i, q_data in enumerate(QUESTIONS_DATA):
        st.markdown(f"##### Q{i+1}. {q_data['question']}")
        
        # è³ªå•ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’ç”Ÿæˆ
        if q_data['key'] in ["q6_wallet_money", "q7_closing_hours", "q10_staff_attention", "q14_target_medals"]: # æ•°å€¤å…¥åŠ›
            if q_data['key'] == "q6_wallet_money":
                answer = st.number_input("æ®‹ã‚Šã„ãã‚‰ï¼Ÿ(å††)", min_value=0, value=0, step=1000, key=q_data['key'])
                if answer >= 50000: score = q_data['options'].get("ç›®æ¨™é”æˆæ¸ˆã¿", 0) # ä»®ã®ã‚¹ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯
                elif answer >= 10000: score = q_data['options'].get("ã‚‚ã†å°‘ã—", 0)
                elif answer > 0: score = q_data['options'].get("çµ¶æœ›çš„", 0)
                else: score = q_data['options'].get("ç›®æ¨™è¨­å®šãªã—", 0)
            elif q_data['key'] == "q7_closing_hours":
                answer = st.number_input("æ®‹ã‚Šæ™‚é–“ï¼Ÿ(æ™‚é–“)", min_value=0, max_value=10, value=0, key=q_data['key'])
                if answer >= 5: score = 2
                elif answer >= 3: score = 1
                elif answer > 0: score = 0
                else: score = -2
            elif q_data['key'] == "q10_staff_attention":
                answer = st.number_input("ä½•å›ï¼Ÿ(å›)", min_value=0, value=0, key=q_data['key'])
                if answer >= 3: score = 3
                elif answer >= 1: score = 1
                else: score = 0
            elif q_data['key'] == "q14_target_medals":
                answer = st.number_input("ç›®æ¨™å‡ºç‰ã¯ä½•æšï¼Ÿ", min_value=0, value=0, step=1000, key=q_data['key'])
                if answer == 0: score = 0
                elif answer >= 50000: score = 5
                elif answer >= 10000: score = 3
                else: score = 1
            user_answers[q_data['key']] = answer
            total_score += score
        else: # é¸æŠè‚¢
            options_list = list(q_data['options'].keys())
            answer = st.selectbox("é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„", options_list, key=q_data['key'])
            score = q_data['options'].get(answer, 0)
            user_answers[q_data['key']] = answer
            total_score += score
        
        st.markdown("---") # åŒºåˆ‡ã‚Šç·š

st.markdown("### ã•ã‚ã€ã‚ãªãŸã®ã‚„ã‚æ™‚ã¯ï¼ï¼Ÿ")
predict_button = st.button("ğŸ”® ã‚„ã‚æ™‚ã‚’å ã†ï¼", type="primary")

if predict_button:
    # ã‚¹ã‚³ã‚¢ã«åŸºã¥ã„ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é¸æŠ
    if total_score >= 30:
        result_category = "score_very_high"
    elif total_score >= 10:
        result_category = "score_high"
    elif total_score >= -9: # ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ã®ç¯„å›²ã‚’èª¿æ•´
        result_category = "score_neutral"
    elif total_score >= -29:
        result_category = "score_low"
    else:
        result_category = "score_very_low"
    
    selected_message = random.choice(RESULT_MESSAGES[result_category])
    
    st.subheader("â–¼ãŠã¿ãã˜çµæœâ–¼")
    st.markdown(f"## {selected_message}")
    st.markdown(f"ï¼ˆåˆè¨ˆã‚¹ã‚³ã‚¢: {total_score}ç‚¹ï¼‰")
    st.info("â€»ã“ã®çµæœã¯ã‚ãã¾ã§ãŠãµã–ã‘ã§ã™ã€‚éŠæŠ€ã¯è‡ªå·±è²¬ä»»ã§ãŠé¡˜ã„ã—ã¾ã™ï¼")